{% extends 'customer/customerbase.html' %}
{% load widget_tweaks %}
{% block content %}
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <style>
       <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  a:link {
        text-decoration: none;
      }
       label #sidebar_btn {
      z-index: 1;
      color: #fff;
      position: fixed;
      cursor: pointer;
      left: 300px;
      padding-left: 60px;
      margin-top:15px;
      font-size: 20px;
      
      transition: 0.5s;
      transition-property: color;
    }
  </style>
</head>


<div class="span9">
<div class="row-fluid">
    <div class="span12 box">
        <div class="box-header"><h3><i class="icon-play"></i> Lista de Licitaciones</h3></div>
        <div class="box-content">
            <div class="content-inner">
                <div class="marg20-btm">
                    {{spsc}} <span class="badge badge-inverse">{{questions|length}}</span>
                   
                   
                   
                    <form class="form-inline pull-right" action="/asegurar1/">
                        Id Licitacion: <input type="text" id="txtVarX" /><br />
                        <button type="button" id="cmdRedirect">Buscar</button>
                       
                    </form>
                   
                    
                    


                {% if questions %}
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Código de la Licitación</th>
                            <th>Nombre de la Licitación</th>
                            <th>Fecha de Cierre de la Licitación</th>
                            <th>Seleccionar</th>
                            <th>Ver</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% comment %} Mostrando la lista de todas licitaciones {% endcomment %}
                    {% for question in page_obj.object_list %}   
                        <tr>
                            <td><p style="font-size: small;">{{ question.CodigoExterno }}</p></td>
                            <td><p style="font-size: small;">{{question.Nombre}}</p></td>
                            <td><p style="font-size: small;">{{ question.FechaCierre }}</p></td>
                        
                            {% comment %} Verificar se a partida já foi realizada {% endcomment %}
                            <td><div class="btn-group"></div>
                            <a class="btn" href="/asegurar1/{{ question.CodigoExterno }}" rel="tooltip" data-original-title="Detalle">Poliza</a>
                            
                           
                            
                                
                        </td>

                            <td><div class="btn-group">
                                   
                                    <a class="btn" href="https://www.mercadopublico.cl/Portal/Modules/Site/Busquedas/BuscadorAvanzado.aspx?qs=1" rel="tooltip" data-original-title="Detalle">MercadoPublico</a>

                                  {% comment %} so actualiza se o usuario fizer parte a equipe de afministração do sistema {% endcomment %}
                                  {% if user.is_staff %}
                                    <a class="btn" href="" rel="tooltip" data-original-title="Atualizar da partida"><i class="icon-inbox"></i> Actualizar</a>
                                  {% endif %}  
                                  
                               </div>
                            </td>
                        </tr>
                {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <div class="alert alert-info">
                    <h3>Sem partidas adicionadas</h2>
                </div>
                {% endif %}
                
    <!-- Paginação -->
   
   
    <div class="col-md-10 mb-4">
     
          {% if page_obj.has_previous %}
          
              <a class="btn btn-outline-info" href="?page=1">Primeiro</a>
              <a class="btn btn-outline-info" href="?page={{ page_obj.previous_page_number }}">←</a>
          {% endif %}        
   
          {% for num in page_obj.paginator.page_range %}
          
              {% if page_obj.number == num %}
                  <a class="btn btn-info" href="?page={{ num }}">{{ num }}</a>
              {% elif num > page_obj.number|add:'-3' and num <  page_obj.number|add:'3' %}
                  <a class="btn btn-outline-info" href="?page={{ num }}">{{ num }}</a>
              {% endif %}
          {% endfor %}
  
          {% if page_obj.has_next %}
          
              <a class="btn btn-outline-info" href="?page={{ page_obj.next_page_number }}">→</a>
              <a class="btn btn-outline-info" href="?page={{ page_obj.paginator.num_pages }}">Último</a>
          {% endif %}        
          
     
      </div>


      
    
            </div>
        </div>
    </div>
</div>
</div>
<script >

    const getValueInput = () =>{
      let inputValue = document.getElementById("domTextElement").value; 
      
      var url1 = document.getElementById("valueInput").innerHTML = `/asegurar1/${inputValue}`; 
    }
      var verFueraDeLaFuncion = [];    
        function subPalabras(){
                    palabrasDelUsuario = "/asegurar1/"+document.getElementById("inputPalabras").value;
                    verFueraDeLaFuncion = palabrasDelUsuario;
                    alert(verFueraDeLaFuncion);
                   

                };
                
        function otraFuncion() {
            alert(verFueraDeLaFuncion);
            
            }
       
   
  </script> 


 
<script>
document.getElementById('cmdRedirect').addEventListener('click', function(){
      location.href = '/asegurar1/'+document.getElementById('txtVarX').value;
});
 
</script>
{% endblock content %}
